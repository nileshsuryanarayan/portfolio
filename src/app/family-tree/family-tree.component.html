<div class="family-tree-container">
  <svg></svg>
  <div class="popup" *ngIf="popupVisible">
    <div class="popup-content">
      <div class="grid popop-header">
        <div class="grid-11 popup-header-text">{{ popupNode.firstName }} {{ popupNode.lastName }}</div>
        <div class="grid-1">
          <svg (click)="hideDetails()" id="close-btn" xmlns="http://www.w3.org/2000/svg" fill="red" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-83.6 290.5c4.8 4.8 4.8 12.6 0 17.4l-40.5 40.5c-4.8 4.8-12.6 4.8-17.4 0L256 313.3l-66.5 67.1c-4.8 4.8-12.6 4.8-17.4 0l-40.5-40.5c-4.8-4.8-4.8-12.6 0-17.4l67.1-66.5-67.1-66.5c-4.8-4.8-4.8-12.6 0-17.4l40.5-40.5c4.8-4.8 12.6-4.8 17.4 0l66.5 67.1 66.5-67.1c4.8-4.8 12.6-4.8 17.4 0l40.5 40.5c4.8 4.8 4.8 12.6 0 17.4L313.3 256l67.1 66.5z"/></svg>
        </div>
      </div>
      <div class="grid popup-content-row">
        <div class="grid-5 left popup-field-lbl popup-field">Father</div>
        <div *ngIf="popupEditMode; else fatherName" class="grid-7 left">
          <!-- <input type="text" [(ngModel)]="popupFatherName"> -->

          <select id="father" name="father">
            <option *ngFor="let male of males" value="{{ male.id }}">{{ male.firstName }} {{ male.lastName }}</option>
          </select>
        </div>
        <ng-template #fatherName>
          <div class="grid-7 left popup-field">: {{ popupFatherName }}</div>
        </ng-template>
      </div>
      <div class="grid popup-content-row">
        <div class="grid-5 left popup-field-lbl popup-field">Mother</div>
        <div class="grid-7 left popup-field">: {{ popupMotherName }}</div>
      </div>
      <div class="grid popup-content-row">
        <div class="grid-5 left popup-field-lbl popup-field">Spouse</div>
        <diV class="grid-7 grid popup-content-row">
          <div *ngFor="let spouse of popupNode.spouse">
            <div *ngIf="popupEditMode; else spouseElem" class="grid-12 left">
              <input type="text" value="{{ spouse.firstName }}">
            </div>
            <ng-template #spouseElem class="grid-12 left">
              <div class="grid-12 left popup-field">: {{ spouse.firstName }} {{ spouse.lastName }}</div>
            </ng-template>
          </div>
        </diV>
      </div>
      <div class="grid popup-content-row">
        <div class="grid-5 left popup-field-lbl popup-field">Date of Birth</div>
        <div *ngIf="popupEditMode; else dateOfBirth" class="grid-7 left">
          <input type="date" >
        </div>
        <ng-template #dateOfBirth class="grid-7 left">
          <div class="grid-7 left popup-field">: {{ popupNode.dateOfBirth }}</div>
        </ng-template>
      </div>
      <div *ngIf="popupDateOfDeathValid" class="grid popup-content-row">
        <div class="grid-5 left popup-field-lbl popup-field">Date of Death</div>
        <div *ngIf="popupEditMode; else dateOfDeath" class="grid-7 left">
          <input type="date" >
        </div>
        <ng-template #dateOfDeath class="grid-7 left">
          <div class="grid-7 left popup-field">: {{ popupNode.dateOfDeath }}</div>
        </ng-template>
      </div>
      <div class="grid popup-content-row" *ngIf="popupNode.children !== null && popupNode.children.length > 0">
        <div class="grid-12 left popup-field-lbl popup-field">Children</div>
        <div *ngFor="let childNode of popupNode.children; index as i" class="grid-12 left popup-field">
          &nbsp;&nbsp;&nbsp;{{ i+1 }}.&nbsp;&nbsp;{{ childNode.firstName }}&nbsp;{{ childNode.lastName }}
        </div>
      </div>
      
      <div class="grid popup-content-row" *ngIf="popupEditMode; else editButton">
        <div class="grid-3 center">
          <button (click)="cancelEditMode()" class="btn-grad popup-field-lbl">Cancel</button>
        </div>
        <div class="grid-6 center">
          <button (click)="0" class="btn-grad popup-field-lbl">Add children</button>
        </div>
        <div class="grid-3 center">
          <button (click)="0" class="btn-grad popup-field-lbl">Save</button>
        </div>
      </div>
      <ng-template #editButton>
        <div class="grid popup-content-row">
          <div class="grid-12 center">
            <button (click)="switchToEditMode()" id="edit-btn" class="btn-grad popup-field-lbl">Edit</button>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</div>